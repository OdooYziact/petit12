<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!--action repair -->
    <record id="action_repair_order" model="ir.actions.act_window">
        <field name="name">Repair orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mrp.repair.order</field>
        <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
        <!--<field name="view_type">form</field>-->
        <field name="view_mode">tree,form</field>
        <field name="domain">[('partner_id','=',active_id)]</field>
        <field name="context">{'default_partner_id':active_id, 'search_default_partner_id': active_id}</field>
        <!--<field name="filter" eval="True"/>-->
    </record>

    <!-- Inherit Form View to Modify it -->
    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">view_partner_form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
        <!--<field name="priority" eval="40"/>-->
        <field name="arch" type="xml">

            <!--ajout du bouton vers les rÃ©parations avec compteur-->
            <xpath expr="//div[@name='button_box']/button[last()]" position="after">
                <field name="repair_order_ids" invisible="1"/>
                <button name="%(action_repair_order)d" type="action" class="oe_stat_button" icon="fa-wrench">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="repair_order_count" widget="statinfo" nolabel="1"/></span>
                        <span class="o_stat_text"># of Repair Order</span>
                    </div>
                </button>
            </xpath>

        </field>
    </record>


</odoo>